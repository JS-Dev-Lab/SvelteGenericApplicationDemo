!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).app={})}(this,(function(t){"use strict";function e(){}const n=[];function o(t,e){return{subscribe:s(t,e).subscribe}}function s(t,o=e){let s;const u=[];function c(e){if(c=e,((o=t)!=o?c==c:o!==c||o&&"object"==typeof o||"function"==typeof o)&&(t=e,s)){const e=!n.length;for(let e=0;e<u.length;e+=1){const o=u[e];o[1](),n.push(o,t)}if(e){for(let t=0;t<n.length;t+=2)n[t][0](n[t+1]);n.length=0}}var o,c}return{set:c,update:function(e){c(e(t))},subscribe:function(n,i=e){const r=[n,i];return u.push(r),1===u.length&&(s=o(c)||e),n(t),()=>{const t=u.indexOf(r);-1!==t&&u.splice(t,1),0===u.length&&(s(),s=null)}}}}let u,c=null,i=null;function r({state:t,commands:e}){null===c&&(c=t,i=e)}const f=t=>o(t,(function(t){return u=t,function(){}})),l=t=>o(t,(function(){return function(){}}));class a{constructor(t,e){this._application=t,this._state=e}update(t){const e={...this._state};t(e),this.fullUpdate(e)}get state(){return this._state}fullUpdate(t){this._state=Object.freeze(t),u(this._state)}}t.getCommands=function(){return i},t.getState=function(){return c},t.viewCreatorFactory=function(t,e){return({state:n,commands:o})=>{const s=Object.freeze({...n});r({state:f(s),commands:l(o)});const u=new e({target:t});return new a(u,s,o)}},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=index.js.map
